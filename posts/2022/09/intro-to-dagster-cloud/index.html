<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Intro to Dagster Cloud | Karn Wong</title><meta name=keywords content="data engineering"><meta name=description content="Imagine you have a few data pipelines to schedule. Simplest solution would be cronjob. Time goes by and next thing you know, you have around 50 pipelines to manage. The fun starts when you have to hunt down which pipeline doesn&rsquo;t run normally. And by then it would be super hard to do tracing if you haven&rsquo;t set up logging and monitoring.
Luckily there are tools we can use to improve the situation."><meta name=author content="Karn Wong"><link rel=canonical href=https://www.karnwong.me/posts/2022/09/intro-to-dagster-cloud/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.karnwong.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.karnwong.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.karnwong.me/favicon-32x32.png><link rel=apple-touch-icon href=https://www.karnwong.me/apple-touch-icon.png><link rel=mask-icon href=https://www.karnwong.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-8CYMFC0KZ9"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8CYMFC0KZ9",{anonymize_ip:!1})}</script><meta property="og:title" content="Intro to Dagster Cloud"><meta property="og:description" content="Imagine you have a few data pipelines to schedule. Simplest solution would be cronjob. Time goes by and next thing you know, you have around 50 pipelines to manage. The fun starts when you have to hunt down which pipeline doesn&rsquo;t run normally. And by then it would be super hard to do tracing if you haven&rsquo;t set up logging and monitoring.
Luckily there are tools we can use to improve the situation."><meta property="og:type" content="article"><meta property="og:url" content="https://www.karnwong.me/posts/2022/09/intro-to-dagster-cloud/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-27T17:19:45+07:00"><meta property="article:modified_time" content="2022-09-27T17:19:45+07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Intro to Dagster Cloud"><meta name=twitter:description content="Imagine you have a few data pipelines to schedule. Simplest solution would be cronjob. Time goes by and next thing you know, you have around 50 pipelines to manage. The fun starts when you have to hunt down which pipeline doesn&rsquo;t run normally. And by then it would be super hard to do tracing if you haven&rsquo;t set up logging and monitoring.
Luckily there are tools we can use to improve the situation."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.karnwong.me/posts/"},{"@type":"ListItem","position":2,"name":"Intro to Dagster Cloud","item":"https://www.karnwong.me/posts/2022/09/intro-to-dagster-cloud/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Intro to Dagster Cloud","name":"Intro to Dagster Cloud","description":"Imagine you have a few data pipelines to schedule. Simplest solution would be cronjob. Time goes by and next thing you know, you have around 50 pipelines to manage. The fun starts when you have to hunt down which pipeline doesn\u0026rsquo;t run normally. And by then it would be super hard to do tracing if you haven\u0026rsquo;t set up logging and monitoring.\nLuckily there are tools we can use to improve the situation.","keywords":["data engineering"],"articleBody":"Imagine you have a few data pipelines to schedule. Simplest solution would be cronjob. Time goes by and next thing you know, you have around 50 pipelines to manage. The fun starts when you have to hunt down which pipeline doesnâ€™t run normally. And by then it would be super hard to do tracing if you havenâ€™t set up logging and monitoring.\nLuckily there are tools we can use to improve the situation. Task orchestrators are born exactly for this, to schedule and monitor pipelines. These days there are more bells and whistles, such as backfilling and sensor triggers. Some also integrate with data catalog tools and provide table specs and data lineage.\nSounds familiar? If you have been looking into Airflow, this is exactly what it does. But there are other alternatives too, and in this post weâ€™re going to find out what Dagster Cloud can do. (Spoiler: yay CI/CD).\nDagster architecture This is how dagster work. But to set all this up yourself, you need to at least:\nPackage each dagster repository into its own image Setup dagit container for UI Set up dagster daemon instance to trigger tasks Set up postgres for dagster metastore Set I/O manager to use blob storage Set up default executors and concurrent run limits CI/CD to update code and base dagster image And if you have multiple users, you need to set up the auth yourself too.\nEnters Dagster Cloud But folks at Dagster know people are finding it very tricky to set it up, so they provide a few cloud offerings, one of which is serverless. This essentially means you only need to supply the code and set up CI/CD, and Dagster would provide a VM to run your tasks.\nTo test it out, you can sign up on Dagster Cloud and follow instructions here.\nCool dagster features Branch preview Frontend usually set up CI/CD to return a preview of a PR, now you can do the same with dagster!\nThis means your team can preview what the DAG would look like, or give it a spin before deploying to prod ðŸš€.\nMultiple teams you say? Imagine working in an organization with many teams. Some teams might use dbt, another might use spark. Sometimes each team has different virtual environment. Even if you can use the same setup for multiple teams, over time the number of pipelines would grow significantly, which means itâ€™s harder to manage. But we can set up a dagster repo for each team, then link them together via Dagster Cloud for a single control plane.\nNotice each code location has attached git hash. Yay tracing!\nTable lineage Running multiple pipelines are cool. But if you update this pipeline, do you also need to update downstream pipelines? Iâ€™m sure you can have a list of pipelines dependency somewhere, but itâ€™s so much more convenient to see it right from dagster.\nNotice the Materialize button on top right. This means you can trigger run on an upstream table, and it would automatically update downstream tables.\nDagster has more features, donâ€™t forget to check out their docs (itâ€™s well written)!\n","wordCount":"520","inLanguage":"en","datePublished":"2022-09-27T17:19:45+07:00","dateModified":"2022-09-27T17:19:45+07:00","author":{"@type":"Person","name":"Karn Wong"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.karnwong.me/posts/2022/09/intro-to-dagster-cloud/"},"publisher":{"@type":"Organization","name":"Karn Wong","logo":{"@type":"ImageObject","url":"https://www.karnwong.me/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.karnwong.me/ accesskey=h title="Karn Wong (Alt + H)">Karn Wong</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.karnwong.me/about/ title=About><span>About</span></a></li><li><a href=https://www.karnwong.me/posts title=Posts><span>Posts</span></a></li><li><a href=https://www.karnwong.me/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://www.karnwong.me/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://www.karnwong.me/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.karnwong.me/>Home</a>&nbsp;Â»&nbsp;<a href=https://www.karnwong.me/posts/>Posts</a></div><h1 class=post-title>Intro to Dagster Cloud</h1><div class=post-meta><span title='2022-09-27 17:19:45 +0700 +07'>September 27, 2022</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Karn Wong</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#dagster-architecturehttpsdocsdagsteriodeploymentoverview aria-label="Dagster architecture"><a href=https://docs.dagster.io/deployment/overview>Dagster architecture</a></a></li><li><a href=#enters-dagster-cloud aria-label="Enters Dagster Cloud">Enters Dagster Cloud</a></li><li><a href=#cool-dagster-features aria-label="Cool dagster features">Cool dagster features</a></li><li><a href=#branch-preview aria-label="Branch preview">Branch preview</a></li><li><a href=#multiple-teams-you-say aria-label="Multiple teams you say?">Multiple teams you say?</a></li><li><a href=#table-lineage aria-label="Table lineage">Table lineage</a></li></ul></div></details></div><div class=post-content><p>Imagine you have a few data pipelines to schedule. Simplest solution would be cronjob. Time goes by and next thing you know, you have around 50 pipelines to manage. The fun starts when you have to hunt down which pipeline doesn&rsquo;t run normally. And by then it would be super hard to do tracing if you haven&rsquo;t set up logging and monitoring.</p><p>Luckily there are tools we can use to improve the situation. Task orchestrators are born exactly for this, to schedule and monitor pipelines. These days there are more bells and whistles, such as backfilling and sensor triggers. Some also integrate with data catalog tools and provide table specs and data lineage.</p><p>Sounds familiar? If you have been looking into Airflow, this is exactly what it does. But there are other alternatives too, and in this post we&rsquo;re going to find out what Dagster Cloud can do. (Spoiler: yay CI/CD).</p><h2 id=dagster-architecturehttpsdocsdagsteriodeploymentoverview><a href=https://docs.dagster.io/deployment/overview>Dagster architecture</a><a hidden class=anchor aria-hidden=true href=#dagster-architecturehttpsdocsdagsteriodeploymentoverview>#</a></h2><p><img loading=lazy src=/images/2022-09-27-19-27-01.png alt="dagster architecture"></p><p>This is how dagster work. But to set all this up yourself, you need to at least:</p><ul><li>Package each dagster repository into its own image</li><li>Setup dagit container for UI</li><li>Set up dagster daemon instance to trigger tasks</li><li>Set up postgres for dagster metastore</li><li>Set I/O manager to use blob storage</li><li>Set up default executors and concurrent run limits</li><li>CI/CD to update code and base dagster image</li></ul><p>And if you have multiple users, you need to set up the auth yourself too.</p><h2 id=enters-dagster-cloud>Enters Dagster Cloud<a hidden class=anchor aria-hidden=true href=#enters-dagster-cloud>#</a></h2><p>But folks at Dagster know people are finding it very tricky to set it up, so they provide a few cloud offerings, one of which is serverless. This essentially means you only need to supply the code and set up CI/CD, and Dagster would provide a VM to run your tasks.</p><p>To test it out, you can <a href=https://dagster.cloud/signup>sign up on Dagster Cloud</a> and follow instructions <a href=https://docs.dagster.io/dagster-cloud/getting-started/getting-started-with-serverless-deployment>here</a>.</p><h2 id=cool-dagster-features>Cool dagster features<a hidden class=anchor aria-hidden=true href=#cool-dagster-features>#</a></h2><h2 id=branch-preview>Branch preview<a hidden class=anchor aria-hidden=true href=#branch-preview>#</a></h2><p>Frontend usually set up CI/CD to return a preview of a PR, now you can do the same with dagster!</p><p><img loading=lazy src=/images/2022-09-27-19-35-47.png alt="dagster pr branch deployment"></p><p>This means your team can preview what the DAG would look like, or give it a spin before deploying to prod ðŸš€.</p><h2 id=multiple-teams-you-say>Multiple teams you say?<a hidden class=anchor aria-hidden=true href=#multiple-teams-you-say>#</a></h2><p>Imagine working in an organization with many teams. Some teams might use dbt, another might use spark. Sometimes each team has different virtual environment. Even if you can use the same setup for multiple teams, over time the number of pipelines would grow significantly, which means it&rsquo;s harder to manage. But we can set up a dagster repo for each team, then link them together via Dagster Cloud for a single control plane.</p><p><img loading=lazy src=/images/2022-09-27-19-41-55.png alt="dagster workspace"></p><p>Notice each code location has attached git hash. Yay tracing!</p><h2 id=table-lineage>Table lineage<a hidden class=anchor aria-hidden=true href=#table-lineage>#</a></h2><p>Running multiple pipelines are cool. But if you update this pipeline, do you also need to update downstream pipelines? I&rsquo;m sure you can have a list of pipelines dependency somewhere, but it&rsquo;s so much more convenient to see it right from dagster.</p><p><img loading=lazy src=/images/2022-09-27-19-45-20.png alt="dagster table lineage"></p><p>Notice the <code>Materialize</code> button on top right. This means you can trigger run on an upstream table, and it would automatically update downstream tables.</p><hr><p>Dagster has more features, don&rsquo;t forget to check out their <a href=https://docs.dagster.io/>docs</a> (it&rsquo;s well written)!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.karnwong.me/tags/data-engineering/>data engineering</a></li></ul><nav class=paginav><a class=prev href=https://www.karnwong.me/posts/2022/10/terraform-with-ecs-task-on-ec2-backend/><span class=title>Â« Prev</span><br><span>Terraform with ECS task on EC2 backend</span></a>
<a class=next href=https://www.karnwong.me/posts/2022/09/intro-to-pulumi/><span class=title>Next Â»</span><br><span>Intro to Pulumi</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://www.karnwong.me/>Karn Wong</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>